<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Finance Tracker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <style>
        body {
            font-family: 'lobster', cursive;
            background-image: url('https://github.com/bunekuntababu/imges/blob/main/WhatsApp%20Image%202024-10-15%20at%202.56.07%20PM.jpeg?raw=true');
            background-size: cover;
            background-position: center ;
            background-repeat: no-repeat;
            /* background-color: #  ; */
            margin: 0;
            padding:auto;
            /* padding: 0 20px; */
            line-height: 1.6;
            margin: 0;
            /* background-color: #be3232;  */
        }
        .navbar {
            background-color: skyblue;
            color: rgb(19, 18, 18);
            padding: 10px ;
            text-align: center;
            padding-bottom: 15px;
        }
        #navbar-logo img{
            width: 50px;
            height: 50px;
            padding: auto;
            /* display: flex; */
            float: left;
        }
        #navbar-logo1 img{
            width: 50px;
            height: 50px;
            padding: auto;

            /* display: flex; */
            float: right;
            
        }
        
        .navbar button {
            background-color: transparent;
            border: none;
            color: rgb(15, 14, 14);
            padding: 10px 15px;
            cursor: pointer;
            font-size: 16px;
            /* display: block; */
        }
        .navbar button:hover {
            background-color: #30ba37;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: rgb(9, 236, 233);
            border-radius: 30px;
            padding: 10px;
            /* box-shadow: 0 0 10px rgba(0,0,0,0.1); */
        }
    
        #loginPassword{
            display: block;
        }
        #showPassword{
            width: 20px;
            padding-left: 5px;
            cursor: pointer;

        }

        #showConfirmPassword{
            width: 20px;
            padding-left: 5px;
            cursor: pointer;

        }

        
        .chart-container {
            margin-top: 20px;
            size: 50px;
        }
        #loginForm, #signupForm, #contactForm {
            display: none;
        }
        #financeApp {
            display: none;
        }
        #expenseChart {
            width: 300px;
            height: 300px;
            display: flex;
            padding-bottom: 100px;
        }

        
    </style>
</head>
<body>

    <div class="navbar">
        <div id="navbar-logo">
        <img src="https://github.com/bunekuntababu/imges/raw/refs/heads/main/DALL%C2%B7E%202024-10-16%2018.11.49%20-%20A%20logo%20for%20a%20personal%20finance%20app%20featuring%20the%20letter%20'B'%20prominently%20in%20the%20center.%20The%20letter%20'B'%20should%20be%20in%20dark%20blue,%20and%20the%20background%20color%20.webp" alt="logo"height=20px width="20px">

        </div>
        <button onclick="showHome()"><strong>Home</strong></button>
        <button onclick="showLoginForm()"><strong>Login</strong></button>
        <button onclick="showSignupForm()"><strong>Sign Up</strong></button>
        <button onclick="showContactForm()"><strong>Contact</strong></button>
        <button id="logoutBtn" onclick="logout()" style="display:none;">Logout</button>
        
    </div>

    <div class="container">
        <div id="homePage">
            <h1>Welcome to Personal Finance Tracker</h1>
            <p>Track your income and expenses, set budgets, and achieve your financial goals!Lorem Lorem ipsum dolor sit, amet consectetur adipisicing elit. Eaque sapiente enim soluta eius odit quis rerum, voluptas vel esse dignissimos odio ex provident. Odit omnis, non aspernatur ut temporibus natus! Lorem ipsum, dolor sit amet consectetur adipisicing elit. Nihil laborum fugiat quae praesentium aspernatur numquam repudiandae sint dolorum, quas inventore voluptatibus impedit molestias similique sapiente laboriosam nobis dignissimos hic quis! lorem
                Lorem, ipsum dolor sit amet consectetur adipisicing elit. Tenetur, molestias necessitatibus libero perferendis adipisci impedit, provident non iure aperiam reprehenderit dolor amet quam minima atque ipsa, temporibus perspiciatis quos. 
            </p>

        </div>

        <form id="loginForm">
            <h2>Login</h2>
            <div class="input-group">
                <label for="loginUsername">Username:</label>
                <input type="text" id="loginUsername" required>
            </div>
            <div class="input-group">
                <label for="loginPassword">Password:</label>
                <input type="password" id="loginPassword" name="password">
                <input type="checkbox" id="showPassword" onclick="togglePassword()"> Show Password

            </div>
            <button type="button" onclick="login()">Login</button>
        </form>

        <form id="signupForm">
            <h2>Sign Up</h2>
            <div class="input-group">
                <label for="signupUsername">Username:</label>
                <input type="text" id="signupUsername" required>
            </div>
            <div class="input-group">
                <label for="signupPassword">Password:</label>
                <input type="password" id="signupPassword" name="password">
                <input type="checkbox" id="showPassword" onclick="togglePassword1()"> Show Password
            </div>
            <div class="input-group">
                <label for="confirmPassword">Confirm Password:</label>
                <input type="password" id="confirmPassword" name="confirmPassword" required>
                <input type="checkbox" id="showConfirmPassword" onclick="toggleConfirmPassword()"> Show Password
            </div>
            <button type="button" onclick="signup()">Sign Up</button>
            <div class="error" id="errorMessage"></div>
        </form>

        <div id="contactForm">
            <h2>Contact Us</h2>
            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Aspernatur quasi veritatis dolorum quo ea voluptate nobis modi officia molestias, recusandae nihil quas laborum dignissimos minus fugiat, maiores sapiente asperiores unde. Lorem ipsum dolor sit amet consectetur adipisicing elit. Nostrum, nobis! Voluptates quos accusamus, modi incidunt, quod obcaecati ea pariatur nostrum possimus nemo consequatur, esse reiciendis velit aspernatur temporibus reprehenderit enim!
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Sit dignissimos molestias eaque temporibus, dolorem praesentium ullam ratione molestiae excepturi expedita nesciunt non sint, porro, perferendis quisquam sed aliquam! Deleniti, iste!lorem <br>any inquiries, please email us at: <strong>bunekuntababu@gmail.com </strong></p>
        </div>

        <div id="financeApp">
            <h2>Your Financial Dashboard</h2>
            <div class="input-group">
                <label for="type">Type:</label>
                <select id="type">
                    <option value="income">Income</option>
                    <option value="expense">Expense</option>
                </select>
            </div>
            
            <div class="input-group">
                <label for="amount">Amount:</label>
                <input type="number" id="amount" placeholder="Enter amount">
            </div>
            
            <div class="input-group">
                <label for="category">Category:</label>
                <select id="category">
                    <option value="salary">Salary</option>
                    <option value="food">Food</option>
                    <option value="rent">Rent</option>
                    <option value="entertainment">Entertainment</option>
                    <option value="transport">Transport</option>
                    <option value="other">Other</option>
                </select>
            </div>
            
            <div class="input-group">
                <label for="date">Date:</label>
                <input type="date" id="date">
            </div>
            
            <button id="transactionbtn" onclick="addTransaction()">Add Transaction</button>
            
            <h2>Transactions</h2>
            <table id="transactionTable">
                <tr>
                    <th>Type</th>
                    <th>Amount</th>
                    <th>Category</th>
                    <th>Date</th>
                    <th>Actions</th>
                </tr>
            </table>
            
            <h2>Monthly Summary</h2>
            <p>Total Income: $<span id="totalIncome">0</span></p>
            <p>Total Expenses: $<span id="totalExpenses">0</span></p>
            <p>Savings: $<span id="savings">0</span></p>
            
            <div class="chart-container">
                <canvas id="expenseChart" width="300" height="300"></canvas>
            </div>
        </div>
        
    </div>
   

    <script>
        let currentUser = null;
        let transactions = [];
        let editingIndex = -1;

        function showHome() {
            document.getElementById('homePage').style.display = 'block';
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').style.display = 'none';
            document.getElementById('contactForm').style.display = 'none';
            document.getElementById('financeApp').style.display = 'none';
        }

        function showLoginForm() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('signupForm').style.display = 'none';
            document.getElementById('contactForm').style.display = 'none';
            document.getElementById('financeApp').style.display = 'none';
        }

        function showSignupForm() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').style.display = 'block';
            document.getElementById('contactForm').style.display = 'none';
            document.getElementById('financeApp').style.display = 'none';
        }

        function showContactForm() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').style.display = 'none';
            document.getElementById('contactForm').style.display = 'block';
            document.getElementById('financeApp').style.display = 'none';
        }

        function login() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            const users = JSON.parse(localStorage.getItem('users')) || {};

            if (users[username] && users[username].password === password) {
                currentUser = username;
                loadUserData();
                showFinanceApp();
            } else {
                alert('Invalid username or password');
            }
        }
        function togglePassword() {
            var passwordField = document.getElementById("loginPassword");
            if (passwordField.type === "password") {
                passwordField.type = "text";
            } else {
                passwordField.type = "password";
            }
        }

       
        function togglePassword1() {
            var passwordField = document.getElementById("signupPassword");
            if (passwordField.type === "password") {
                passwordField.type = "text";
            } else {
                passwordField.type = "password";
            }
        }
        function toggleConfirmPassword() {
        var confirmPasswordField = document.getElementById("confirmPassword");
        if (confirmPasswordField.type === "password") {
            confirmPasswordField.type = "text";
        } else {
            confirmPasswordField.type = "password";
        }
    }

        function logout() {
            currentUser = null;
            showHome();
            document.getElementById('logoutBtn').style.display = 'none';
        }

        function loadUserData() {
            const users = JSON.parse(localStorage.getItem('users')) || {};
            transactions = users[currentUser].transactions || [];
        }

        function saveUserData() {
            let users = JSON.parse(localStorage.getItem('users')) || {};
            users[currentUser].transactions = transactions;
            localStorage.setItem('users', JSON.stringify(users));
        }

        function addTransaction() {
            const type = document.getElementById('type').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const category = document.getElementById('category').value;
            const date = document.getElementById('date').value;

            if (isNaN(amount) || amount <= 0) {
                alert('Please enter a valid amount');
                return;
            }

            const transaction = { type, amount, category, date };

            if (editingIndex === -1) {
                transactions.push(transaction);
            } else {
                transactions[editingIndex] = transaction;
                editingIndex = -1;
                document.querySelector('button').textContent = 'Add Transaction';
            }

            saveUserData();
            updateTransactionTable();
            updateSummary();
            updateChart();
            clearForm();
        }

        function clearForm() {
            document.getElementById('type').value = 'income';
            document.getElementById('amount').value = '';
            document.getElementById('category').value = 'salary';
            document.getElementById('date').value = '';
        }

        function updateTransactionTable() {
            const table = document.getElementById('transactionTable');
            // Clear existing rows except header
            while (table.rows.length > 1) {
                table.deleteRow(1);
            }

            transactions.forEach((transaction, index) => {
                const row = table.insertRow(-1);
                row.insertCell(0).textContent = transaction.type;
                row.insertCell(1).textContent = '$' + transaction.amount.toFixed(2);
                row.insertCell(2).textContent = transaction.category;
                row.insertCell(3).textContent = transaction.date;
                
                const actionsCell = row.insertCell(4);
                const editBtn = document.createElement('button');
                editBtn.textContent = 'Edit';
                editBtn.className = 'edit-btn';
                editBtn.onclick = () => editTransaction(index);
                actionsCell.appendChild(editBtn);

                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Delete';
                deleteBtn.className = 'delete-btn';
                deleteBtn.onclick = () => deleteTransaction(index);
                actionsCell.appendChild(deleteBtn);
            });
        }

        function editTransaction(index) {
            const transaction = transactions[index];
            document.getElementById('type').value = transaction.type;
            document.getElementById('amount').value = transaction.amount;
            document.getElementById('category').value = transaction.category;
            document.getElementById('date').value = transaction.date;
        
            editingIndex = index;
        
        
            document.getElementById('transactionbtn').innerText = 'Update Transaction';
        }
            //     document.querySelector('button').textContent = 'Add Transaction';
        // }

        function deleteTransaction(index) {
            if (confirm('Are you sure you want to delete this transaction?')) {
                transactions.splice(index, 1);
                saveUserData();
                updateTransactionTable();
                updateSummary();
                updateChart();
            }
        }

        function updateSummary() {
            const totalIncome = transactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
            const totalExpenses = transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
            const savings = totalIncome - totalExpenses;

            document.getElementById('totalIncome').textContent = totalIncome.toFixed(2);
            document.getElementById('totalExpenses').textContent = totalExpenses.toFixed(2);
            document.getElementById('savings').textContent = savings.toFixed(2);
        }

        function updateChart() {
            const ctx = document.getElementById('expenseChart').getContext('2d');
            const expensesByCategory = {};

            transactions.filter(t => t.type === 'expense').forEach(t => {
                expensesByCategory[t.category] = (expensesByCategory[t.category] || 0) + t.amount;
            });

            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: Object.keys(expensesByCategory),
                    datasets: [{
                        data: Object.values(expensesByCategory),
                        backgroundColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    title: {
                        display: true,
                        text: 'Expenses by Category'
                    }
                }
            });
        }

        // // Initialize the app
        showHome();
    </script>
</body>
</html>
